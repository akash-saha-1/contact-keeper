(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(17),r=a.n(c),s=(a(42),a(16)),o=a(4),l=a(9),i=a.n(l),u=Object(n.createContext)(),j=Object(n.createContext)(),d=a(0),p=function(e){e.title;var t=e.icon,a=Object(n.useContext)(u),c=Object(n.useContext)(j),r=a.isAuthenticated,o=a.logout,l=a.user,i=c.clearContacts,p=Object(d.jsxs)(n.Fragment,{children:[Object(d.jsxs)("li",{children:["Hello ",l&&l.name]}),Object(d.jsx)("li",{children:Object(d.jsxs)("a",{href:"./login",onClick:function(){o(),i()},children:[Object(d.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(d.jsx)("span",{className:"hide-sm",children:"Logout"})]})})]}),b=Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)("li",{children:Object(d.jsx)(s.b,{to:"/about",children:"About"})}),Object(d.jsx)("li",{children:Object(d.jsx)(s.b,{to:"/register",children:"Register"})}),Object(d.jsx)("li",{children:Object(d.jsx)(s.b,{to:"/login",children:"Login"})})]});return Object(d.jsxs)("div",{className:"navbar bg-primary",children:[Object(d.jsx)("h1",{children:Object(d.jsx)("i",{className:t})}),Object(d.jsx)("ul",{children:r?p:b})]})};p.prototype={title:i.a.string.isRequired,icon:i.a.string},p.default={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var b=p,O=function(){var e=Object(n.useContext)(j),t=Object(n.useRef)(""),a=e.filtered,c=e.filterContact,r=e.clearFilter;Object(n.useEffect)((function(){null===a&&(t.current.value="")}));return Object(d.jsx)("form",{children:Object(d.jsx)("input",{ref:t,type:"text",placeholder:"Filter Contacts...",onChange:function(e){""!==t.current.value?c(e.target.value):r()}})})},h=a(14),m=a(2),x=a(7),f=function(){var e=Object(n.useContext)(j),t=e.addContact,a=e.current,c=e.clearCurrent,r=e.updateContact;Object(n.useEffect)((function(){i(null!==a?a:{name:"",email:"",phone:"",type:"personal"})}),[a,e]);var s=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),o=Object(x.a)(s,2),l=o[0],i=o[1],u=l.name,p=l.email,b=l.phone,O=l.type,f=function(e){i(Object(m.a)(Object(m.a)({},l),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null===a?t(l):r(l),i({name:"",email:"",phone:"",type:"personal"}),c()},children:[Object(d.jsx)("h2",{className:"text-primary",children:a?"Edit Contact":"Add Contact"}),Object(d.jsx)("input",{type:"text",name:"name",placeholder:"name",value:u,onChange:f}),Object(d.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:p,onChange:f}),Object(d.jsx)("input",{type:"text",name:"phone",placeholder:"Phone",value:b,onChange:f}),Object(d.jsx)("h5",{children:"Contact Type"}),Object(d.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===O,onChange:f}),"Personal"," ",Object(d.jsx)("input",{type:"radio",name:"type",value:"professional",checked:"professional"===O,onChange:f}),"Professional"," ",Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"submit",className:"btn btn-primary btn-block",value:a?"Edit Contact":"Add Contact"})}),a&&Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"btn-block btn-light",onClick:function(){c()},children:"Clear"})," "]})]})},g=a(73),y=a(71),v=function(e){var t=e.contact,a=Object(n.useContext)(j),c=a.deleteContact,r=a.setCurrent,s=a.clearCurrent,o=t._id,l=t.name,i=t.email,u=t.phone,p=t.type;return Object(d.jsxs)("div",{className:"card bg-light",children:[Object(d.jsxs)("h3",{className:"text-primary text-left",children:[l+" ",Object(d.jsx)("span",{style:{float:"right"},className:"badge "+("professional"===p?"badge-success":"badge-primary"),children:p.charAt(0).toUpperCase()+p.slice(1)})]}),Object(d.jsxs)("ul",{className:"list",children:[i&&Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{className:"fas fa-envelop-open"})," ",i]}),u&&Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{className:"fas fa-phone"})," ",u]})]}),Object(d.jsx)("button",{className:"btn btn-dark btnbtn-sm",onClick:function(){r(t)},children:"Edit"}),Object(d.jsx)("button",{className:"btn btn-danger btnbtn-sm",onClick:function(){c(o),s()},children:"Delete"})]})};v.prototype={contact:i.a.object.isRequired};var C=v,w=a.p+"static/media/spinner.7f686c03.gif",E=function(){return Object(d.jsx)(n.Fragment,{children:Object(d.jsx)("img",{src:w,style:{width:"320px",height:"150px",margin:"auto",display:"block"},alt:"Loading..."})})},N=function(){var e=Object(n.useContext)(j),t=e.contacts,a=e.filtered,c=e.getContacts,r=e.loading;return Object(n.useEffect)((function(){c()}),[]),null==t||0!==t.length||r?Object(d.jsx)(n.Fragment,{children:null==t||r?Object(d.jsx)(E,{}):Object(d.jsx)(g.a,{children:null!==a?a.map((function(e){return Object(d.jsx)(y.a,{timeout:500,classNames:"item",children:Object(d.jsx)(C,{contact:e})},e._id)})):t.map((function(e){return Object(d.jsx)(y.a,{timeout:500,classNames:"item",children:Object(d.jsx)(C,{contact:e})},e._id)}))})}):Object(d.jsx)("h4",{children:"Please add a contact"})},k=function(){var e=Object(n.useContext)(u);return Object(n.useEffect)((function(){e.loadUser()}),[]),Object(d.jsxs)("div",{className:"grid-2",children:[Object(d.jsx)("div",{children:Object(d.jsx)(f,{})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(O,{}),Object(d.jsx)(N,{})]})]})},A=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"About this App"}),Object(d.jsx)("p",{className:"my-1",children:"This is a full stack React app for keeping contact"}),Object(d.jsx)("p",{className:"bg-dark p",children:Object(d.jsx)("strong",{children:"Version : 1.0.0"})})]})},R=a(6),S=a.n(R),T=a(15),_=a(21),L="GET_CONTACTS",P="ADD_CONTACT",F="DELETE_CONTACT",I="SET_CURRENT",D="CLEAR_CURRENT",q="UPDATE_CONTACT",U="FILTER_CONTACTS",G="CLEAR_CONTACTS",H="CLEAR_FILTER",J="CONTACT_ERROR",V="SET_ALERT",B="REMOVE_ALERT",K="REGISTER_SUCCESS",M="REGISTER_FAIL",W="USER_LOADED",z="AUTH_ERROR",Q="LOGIN_SUCCESS",X="LOGIN_FAIL",Y="LOGOUT",Z="CLEAR_ERRORS",$="SET_LOADING",ee="RESET_PASSWOR",te="RESET_FAIL",ae=function(e,t){switch(t.type){case L:return Object(m.a)(Object(m.a)({},e),{},{contacts:t.payload,loading:!1});case P:return Object(m.a)(Object(m.a)({},e),{},{contacts:[t.payload].concat(Object(_.a)(e.contacts)),loading:!1});case q:return Object(m.a)(Object(m.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case F:return Object(m.a)(Object(m.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case G:return Object(m.a)(Object(m.a)({},e),{},{contacts:null,filtered:null,errors:null,current:null});case I:return Object(m.a)(Object(m.a)({},e),{},{current:t.payload});case D:return Object(m.a)(Object(m.a)({},e),{},{current:null});case U:return Object(m.a)(Object(m.a)({},e),{},{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)||e.phone.match(a)})),loading:!1});case H:return Object(m.a)(Object(m.a)({},e),{},{filtered:null});case J:return Object(m.a)(Object(m.a)({},e),{},{error:t.payload});default:return e}},ne=a(12),ce=a.n(ne),re=function(e){var t=Object(n.useReducer)(ae,{contacts:null,current:null,filtered:null,error:null}),a=Object(x.a)(t,2),c=a[0],r=a[1],s=function(){var e=Object(T.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.a.get("/api/contacts");case 3:a=e.sent,r({type:L,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:J,payload:e.t0.response.data.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(T.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ce.a.post("/api/contacts",t,a);case 4:n=e.sent,r({type:P,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:J,payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(T.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.a.delete("/api/contacts/".concat(t));case 3:r({type:F,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:J,payload:e.t0.response.data.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(T.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ce.a.put("/api/contacts/".concat(t._id),t,a);case 4:n=e.sent,r({type:q,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:J,payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(j.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,getContacts:s,deleteContact:l,addContact:o,setCurrent:function(e){return r({type:I,payload:e})},clearCurrent:function(){return r({type:D})},updateContact:i,filterContact:function(e){return r({type:U,payload:e})},clearFilter:function(){return r({type:H})},clearContacts:function(){return r({type:G})}},children:e.children})},se=function(e,t){switch(t.type){case W:return Object(m.a)(Object(m.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case K:case Q:case ee:return localStorage.setItem("token",t.payload.token),Object(m.a)(Object(m.a)(Object(m.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case M:case z:case X:case te:case Y:return localStorage.removeItem("token"),Object(m.a)(Object(m.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case Z:return Object(m.a)(Object(m.a)({},e),{},{error:null});case $:return Object(m.a)(Object(m.a)({},e),{},{loading:"load"});default:return e}},oe=function(e){e?ce.a.defaults.headers.common["x-auth-token"]=e:delete ce.a.defaults.headers.common["x-auth-token"]},le=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,error:null,user:null},a=Object(n.useReducer)(se,t),c=Object(x.a)(a,2),r=c[0],s=c[1],o=function(){var e=Object(T.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&oe(localStorage.token),e.prev=1,e.next=4,ce.a.get("/api/auth");case 4:t=e.sent,s({type:W,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:z});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(T.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:$}),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ce.a.post("/api/users",t,a);case 5:n=e.sent,s({type:K,payload:n.data}),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:M,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(T.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:$}),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ce.a.post("/api/auth",t,a);case 5:n=e.sent,s({type:Q,payload:n.data}),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:X,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(T.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:$}),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ce.a.post("/api/users/reset-password",t,a);case 5:n=e.sent,s({type:ee,payload:n.data}),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:te,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(u.Provider,{value:{token:r.token,isAuthenticated:r.isAuthenticated,loading:r.loading,user:r.user,error:r.error,register:l,login:i,loadUser:o,logout:function(){s({type:Y})},clearErrors:function(){s({type:Z})},resetPassword:j},children:e.children})},ie=Object(n.createContext)(),ue=a(72),je=function(e,t){switch(t.type){case V:return[].concat(Object(_.a)(e),[t.payload]);case B:return e.filter((function(e){return e.id!==t.payload}));default:return e}},de=function(e){var t=Object(n.useReducer)(je,[]),a=Object(x.a)(t,2),c=a[0],r=a[1];return Object(d.jsx)(ie.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,n=Object(ue.a)();r({type:V,payload:{msg:e,type:t,id:n}}),setTimeout((function(){r({type:B,payload:n})}),a)}},children:e.children})},pe=function(e){var t=Object(n.useState)({name:"",email:"",password:"",password2:""}),a=Object(x.a)(t,2),c=a[0],r=a[1],s=Object(n.useContext)(ie),o=Object(n.useContext)(u),l=s.setAlert,i=o.register,j=o.error,p=o.clearErrors,b=o.isAuthenticated,O=o.loading,f=c.name,g=c.email,y=c.password,v=c.password2,C=function(e){r(Object(m.a)(Object(m.a)({},c),{},Object(h.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){b&&e.history.push("/"),"user already exists"===j&&(l(j,"danger"),p())}),[j,b]);return Object(d.jsxs)("div",{className:"form-container",children:[Object(d.jsxs)("h1",{children:["Account ",Object(d.jsx)("span",{className:"text-primary",children:"Register"})]}),"load"===O?Object(d.jsx)(E,{}):Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===f||""===g||""===y||""===v?l("Please enter all fields","danger"):y!==v?l("Passwords do not match","danger"):i({name:f,email:g,password:y})},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"name",children:"Name"}),Object(d.jsx)("input",{type:"text",name:"name",value:f,onChange:C,required:!0})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:g,onChange:C,required:!0})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:y,onChange:C,required:!0,minLength:"5"})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password2",children:"Connfirm Password"}),Object(d.jsx)("input",{type:"password",name:"password2",value:v,onChange:C,required:!0,minLength:"5"})]}),Object(d.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})},be=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(x.a)(t,2),c=a[0],r=a[1],o=Object(n.useContext)(ie),l=Object(n.useContext)(u),i=o.setAlert,j=l.login,p=l.error,b=l.clearErrors,O=l.isAuthenticated,f=l.loading,g=c.email,y=c.password,v=function(e){r(Object(m.a)(Object(m.a)({},c),{},Object(h.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){O&&e.history.push("/"),"Inavlid credentials"===p&&(i(p,"danger"),b())}),[p,O]);return Object(d.jsxs)("div",{className:"form-container",children:[Object(d.jsxs)("h1",{children:["Account ",Object(d.jsx)("span",{className:"text-primary",children:"Login"})]}),"load"===f?Object(d.jsx)(E,{}):Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===g||""===y?i("Please fill in all fields","danger"):j(c),console.log(c)},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:g,onChange:v,required:!0})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:y,onChange:v,required:!0})]}),Object(d.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"}),Object(d.jsx)("button",{className:"btn btn-secondary btn-block",children:Object(d.jsx)(s.b,{to:"/reset-password",children:"Reset Password"})})]})]})},Oe=function(){var e=Object(n.useContext)(ie).alerts;return e.length>0&&e.map((function(e){return Object(d.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(d.jsx)("i",{className:"fas fa-info-circle"})," "+e.msg]},e.id)}))},he=a(36),me=function(e){var t=e.component,a=Object(he.a)(e,["component"]),c=Object(n.useContext)(u),r=c.isAuthenticated,s=c.loading;return Object(d.jsx)(o.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return r||s?Object(d.jsx)(t,Object(m.a)({},e)):Object(d.jsx)(o.a,{to:"/login"})}}))},xe=function(e){var t=Object(n.useState)({email:"",password:"",password2:""}),a=Object(x.a)(t,2),c=a[0],r=a[1],s=Object(n.useContext)(ie),o=Object(n.useContext)(u),l=s.setAlert,i=o.resetPassword,j=o.error,p=o.clearErrors,b=o.isAuthenticated,O=o.loading,f=c.email,g=c.password,y=c.password2,v=function(e){r(Object(m.a)(Object(m.a)({},c),{},Object(h.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){b&&e.history.push("/"),"Inavlid EmailId"===j&&(l(j,"danger",5e3),p())}),[j,b]);return Object(d.jsxs)("div",{className:"form-container",children:[Object(d.jsxs)("h1",{children:["Reset ",Object(d.jsx)("span",{className:"text-primary",children:"Password"})]}),"load"===O?Object(d.jsx)(E,{}):Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===f||""===g||""===y?l("Please fill in all fields","danger"):g!==y?l("Passwords do not match","danger"):i({email:f,password:g}),console.log(c)},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:f,onChange:v,required:!0})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:g,onChange:v,required:!0,minLength:"5"})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(d.jsx)("input",{type:"password",name:"password2",value:y,onChange:v,required:!0,minLength:"5"})]}),Object(d.jsx)("input",{type:"submit",value:"Reset Password",className:"btn btn-primary btn-block"})]})]})};localStorage.token&&oe(localStorage.token);var fe=function(){return Object(d.jsx)(le,{children:Object(d.jsx)(de,{children:Object(d.jsx)(re,{children:Object(d.jsx)(s.a,{children:Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(b,{}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(Oe,{}),Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/about",exact:!0,component:A}),Object(d.jsx)(o.b,{path:"/register",exact:!0,component:pe}),Object(d.jsx)(o.b,{path:"/login",exact:!0,component:be}),Object(d.jsx)(o.b,{path:"/reset-password",exact:!0,component:xe}),Object(d.jsx)(me,{path:"/",exact:!0,component:k})]})]})]})})})})})};r.a.render(Object(d.jsx)(fe,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.9c68c8af.chunk.js.map